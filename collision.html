<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"  >
    <title>Collision two elements / two balls 2d</title>

    <style>
     #draw
     {
      background-color: #aaa;
     }

    </style>
    <script type="text/javascript">
    var c = 0;
    var canvas;
    var context;
   
    function kw(){
      context.fillStyle = 'yellow';
      context.fillRect(0,0,100,100);
      context.strokeRect(0,0,100,100);
      context.fillStyle = 'red';
      context.fillRect(30,30,30,30);      
    }
    function draw2()
    {
      context.beginPath();
      context.moveTo(50,50);
      context.lineTo(100,0);
      context.lineTo(150,50);
      context.lineTo(100,100);
      context.lineTo(50,50);
      context.fillStyle="red";
      context.fill();

    }
    function draw3()
    {
      context.beginPath();
      context.arc(200,100,30,Math.PI,360,false);
      context.closePath();
      context.lineWidth=5;
      context.strokeStyle="black";
      context.stroke();
      context.fillStyle="#333";
      context.fill();
    }

    function draw4()
    {
      context.beginPath();
context.moveTo(50,250);
context.quadraticCurveTo(100,200,180,280);
context.closePath();
context.strokeStyle = "red";
context.stroke();
context.fillStyle="#fff";
context.fill();
    }

      var canvas
      var context;
      var x1 = 50;
      var y1 = 100;
      var radius = 40; 
      var dy1 = 2;
      var dx1 = 2;
      
      var x2 = 200;
      var y2 = 250;
      var dy2 = 2;
      var dx2 = 4;

      var x3 = 350;
      var y3 = 50;
      var dx3=3;
      var dy3=2;
      
    

       window.onload = function draw()
    {
      canvas = document.getElementById('draw');
      context = canvas.getContext('2d');
      //kw();
      setInterval(anim,10);
    }

    function anim()
    {
      context.clearRect(0,0,canvas.width,canvas.height);

      context.beginPath();
      context.arc(x1,y1,radius,0,Math.PI*2,false);
      context.closePath();
      context.fillStyle="green";
      context.fill();
      if(x1+radius>canvas.width || x1-radius<0) dx1=-dx1; 
      if(y1+radius>canvas.height || y1-radius<0) dy1=-dy1;
      x1+=dx1;
      y1+=dy1;


      context.beginPath();
      context.arc(x2,y2,radius,0,Math.PI*2,false);
      context.closePath();
      context.fillStyle="yellow";
      context.fill();
      if(x2+radius>canvas.width || x2-radius<0) dx2=-dx2;
      if(y2+radius>canvas.height || y2-radius<0) dy2=-dy2;
      x2+=dx2;
      y2+=dy2;

      
      context.beginPath();
      context.arc(x3,y3,radius,0,Math.PI*2,false);
      context.closePath();
      context.fillStyle="red";
      context.fill();
      if(x3+radius>canvas.width || x3-radius<0) dx3=-dx3;
      if(y3+radius>canvas.height || y3-radius<0) dy3=-dy3;
      x3+=dx3;
      y3+=dy3;
     

     colision();
    }
   
   function colision()
   {  

      var disx = x2 - x1; //distance beetwen x
      var disy = y2 - y1; //distance beetwen y
      var distance = Math.sqrt(disx*disx+disy*disy); // distance between points x,y and x2,y2
  
      
      var minDistance = radius*2;
      if(distance < minDistance)
      {        
        var angle = Math.atan2(disy,disx), // angle created beetwen X axis and point(x,y);  
            spread = minDistance-distance,
            zx = spread * Math.cos(angle),
            zy = spread * Math.sin(angle);

        x1-=zx;
        y1-=zy;

        var punch = 2; //acceleration
        dx1 -=punch*Math.cos(angle); 
        dy1 -=punch*Math.sin(angle); 
        dx2 +=punch*Math.cos(angle); 
        dy2 +=punch*Math.sin(angle);
        }
    }
    </script>
  </head>

  <body>

    <canvas id="draw" width="500" height="500">
      Twoja przeglÄ…darka nie wspiera Canvas! Zainstaluj Internet Explorer 9.
    </canvas>
    <div id="c"></div>
   
  </body>
</html>